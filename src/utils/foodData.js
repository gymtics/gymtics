export const foodData = {
    // --- PROTEINS ---
    "Chicken Breast (Raw)": { calories: 110, unit: "100g" },
    "Chicken Breast (Cooked)": { calories: 165, unit: "100g" },
    "Chicken Thigh (Raw)": { calories: 177, unit: "100g" },
    "Chicken Thigh (Cooked)": { calories: 209, unit: "100g" },
    "Chicken Wings (Cooked)": { calories: 203, unit: "100g" },
    "Chicken Drumstick": { calories: 172, unit: "100g" },
    "Chicken Tikka": { calories: 150, unit: "100g" },
    "Chicken Curry": { calories: 140, unit: "100g" },
    "Chicken Biryani": { calories: 290, unit: "100g" },
    "Chicken Korma": { calories: 165, unit: "100g" },
    "Egg (Large)": { calories: 72, unit: "1 unit" },
    "Egg (Medium)": { calories: 63, unit: "1 unit" },
    "Egg White": { calories: 17, unit: "1 unit" },
    "Egg Yolk": { calories: 55, unit: "1 unit" },
    "Boiled Egg": { calories: 78, unit: "1 unit" },
    "Fried Egg": { calories: 90, unit: "1 unit" },
    "Omelette (2 Eggs, Plain)": { calories: 154, unit: "1 unit" },
    "Scrambled Eggs": { calories: 100, unit: "100g" },
    "Tuna (Canned in Water)": { calories: 116, unit: "100g" },
    "Tuna (Canned in Oil)": { calories: 186, unit: "100g" },
    "Salmon (Raw)": { calories: 208, unit: "100g" },
    "Salmon (Cooked)": { calories: 206, unit: "100g" },
    "Tilapia": { calories: 96, unit: "100g" },
    "Cod": { calories: 82, unit: "100g" },
    "Shrimp (Cooked)": { calories: 99, unit: "100g" },
    "Prawns": { calories: 115, unit: "100g" },
    "Beef (Ground, 95% Lean)": { calories: 137, unit: "100g" },
    "Beef (Ground, 85% Lean)": { calories: 250, unit: "100g" },
    "Steak (Sirloin)": { calories: 244, unit: "100g" },
    "Steak (Ribeye)": { calories: 291, unit: "100g" },
    "Lamb Chop": { calories: 294, unit: "100g" },
    "Pork Chop": { calories: 231, unit: "100g" },
    "Turkey Breast": { calories: 135, unit: "100g" },
    "Duck": { calories: 337, unit: "100g" },
    "Whey Protein Powder": { calories: 120, unit: "1 scoop (30g)" },
    "Casein Protein": { calories: 110, unit: "1 scoop (30g)" },
    "Soy Chunks (Raw)": { calories: 345, unit: "100g" },
    "Soy Chunks (Cooked)": { calories: 120, unit: "100g" },
    "Tofu (Firm)": { calories: 144, unit: "100g" },
    "Tofu (Silken)": { calories: 55, unit: "100g" },
    "Paneer (Raw)": { calories: 265, unit: "100g" },
    "Paneer Tikka": { calories: 260, unit: "100g" },
    "Paneer Butter Masala": { calories: 230, unit: "100g" },
    "Tempeh": { calories: 192, unit: "100g" },
    "Seitan": { calories: 370, unit: "100g" },
    "Greek Yogurt (Plain, Non-fat)": { calories: 59, unit: "100g" },
    "Greek Yogurt (Full Fat)": { calories: 97, unit: "100g" },
    "Cottage Cheese (Low Fat)": { calories: 72, unit: "100g" },
    "Quark": { calories: 68, unit: "100g" },

    // --- CARBOHYDRATES & GRAINS ---
    "Rice (White, Cooked)": { calories: 130, unit: "100g" },
    "Rice (White, Raw)": { calories: 365, unit: "100g" },
    "Rice (Brown, Cooked)": { calories: 112, unit: "100g" },
    "Rice (Brown, Raw)": { calories: 370, unit: "100g" },
    "Basmati Rice (Cooked)": { calories: 121, unit: "100g" },
    "Jasmine Rice (Cooked)": { calories: 129, unit: "100g" },
    "Oats (Rolled, Raw)": { calories: 389, unit: "100g" },
    "Oatmeal (Cooked)": { calories: 71, unit: "100g" },
    "Instant Oats": { calories: 370, unit: "100g" },
    "Quinoa (Cooked)": { calories: 120, unit: "100g" },
    "Couscous (Cooked)": { calories: 112, unit: "100g" },
    "Pasta (White, Cooked)": { calories: 131, unit: "100g" },
    "Pasta (Whole Wheat, Cooked)": { calories: 124, unit: "100g" },
    "Spaghetti (Cooked)": { calories: 158, unit: "100g" },
    "Macaroni (Cooked)": { calories: 164, unit: "100g" },
    "Noodles (Instant, Cooked)": { calories: 400, unit: "100g" },
    "Bread (White)": { calories: 265, unit: "100g" },
    "Bread (Slice, White)": { calories: 79, unit: "1 unit" },
    "Bread (Whole Wheat)": { calories: 247, unit: "100g" },
    "Bread (Slice, Whole Wheat)": { calories: 82, unit: "1 unit" },
    "Bread (Multigrain)": { calories: 265, unit: "100g" },
    "Sourdough Bread": { calories: 270, unit: "100g" },
    "Bagel": { calories: 250, unit: "1 unit" },
    "Croissant": { calories: 406, unit: "100g" },
    "Roti/Chapati": { calories: 104, unit: "1 unit" },
    "Naan (Plain)": { calories: 260, unit: "1 unit" },
    "Naan (Butter)": { calories: 300, unit: "1 unit" },
    "Garlic Naan": { calories: 320, unit: "1 unit" },
    "Paratha (Plain)": { calories: 200, unit: "1 unit" },
    "Aloo Paratha": { calories: 330, unit: "1 unit" },
    "Puri": { calories: 125, unit: "1 unit" },
    "Dosa (Plain)": { calories: 133, unit: "1 unit" },
    "Masala Dosa": { calories: 387, unit: "1 unit" },
    "Idli": { calories: 39, unit: "1 unit" },
    "Upma": { calories: 192, unit: "100g" },
    "Poha": { calories: 180, unit: "100g" },
    "Pongal": { calories: 212, unit: "100g" },
    "Potato (Boiled)": { calories: 87, unit: "100g" },
    "Potato (Baked)": { calories: 93, unit: "100g" },
    "Sweet Potato (Boiled)": { calories: 86, unit: "100g" },
    "Sweet Potato (Baked)": { calories: 90, unit: "100g" },
    "Corn (Boiled)": { calories: 96, unit: "100g" },
    "Popcorn (Plain)": { calories: 387, unit: "100g" },

    // --- FRUITS ---
    "Banana": { calories: 89, unit: "1 unit" },
    "Apple": { calories: 52, unit: "1 unit" },
    "Apple (Green)": { calories: 50, unit: "1 unit" },
    "Orange": { calories: 47, unit: "1 unit" },
    "Grapes (Green)": { calories: 69, unit: "100g" },
    "Grapes (Red)": { calories: 67, unit: "100g" },
    "Strawberry": { calories: 32, unit: "100g" },
    "Blueberry": { calories: 57, unit: "100g" },
    "Raspberry": { calories: 53, unit: "100g" },
    "Blackberry": { calories: 43, unit: "100g" },
    "Watermelon": { calories: 30, unit: "100g" },
    "Melon (Cantaloupe)": { calories: 34, unit: "100g" },
    "Pineapple": { calories: 50, unit: "100g" },
    "Mango": { calories: 60, unit: "100g" },
    "Papaya": { calories: 43, unit: "100g" },
    "Kiwi": { calories: 61, unit: "100g" },
    "Peach": { calories: 39, unit: "100g" },
    "Pear": { calories: 57, unit: "100g" },
    "Plum": { calories: 46, unit: "100g" },
    "Cherry": { calories: 50, unit: "100g" },
    "Pomegranate": { calories: 83, unit: "100g" },
    "Guava": { calories: 68, unit: "100g" },
    "Lychee": { calories: 66, unit: "100g" },
    "Dragon Fruit": { calories: 60, unit: "100g" },
    "Avocado": { calories: 160, unit: "100g" },
    "Lemon": { calories: 29, unit: "100g" },
    "Lime": { calories: 30, unit: "100g" },
    "Coconut (Meat)": { calories: 354, unit: "100g" },
    "Dates (Medjool)": { calories: 277, unit: "100g" },
    "Raisins": { calories: 299, unit: "100g" },

    // --- VEGETABLES ---
    "Broccoli": { calories: 34, unit: "100g" },
    "Cauliflower": { calories: 25, unit: "100g" },
    "Spinach (Raw)": { calories: 23, unit: "100g" },
    "Spinach (Cooked)": { calories: 23, unit: "100g" },
    "Kale": { calories: 49, unit: "100g" },
    "Lettuce": { calories: 15, unit: "100g" },
    "Cucumber": { calories: 15, unit: "100g" },
    "Tomato": { calories: 18, unit: "100g" },
    "Onion": { calories: 40, unit: "100g" },
    "Carrot (Raw)": { calories: 41, unit: "100g" },
    "Bell Pepper (Red)": { calories: 31, unit: "100g" },
    "Bell Pepper (Green)": { calories: 20, unit: "100g" },
    "Zucchini": { calories: 17, unit: "100g" },
    "Eggplant": { calories: 25, unit: "100g" },
    "Mushroom": { calories: 22, unit: "100g" },
    "Green Beans": { calories: 31, unit: "100g" },
    "Peas": { calories: 81, unit: "100g" },
    "Asparagus": { calories: 20, unit: "100g" },
    "Brussels Sprouts": { calories: 43, unit: "100g" },
    "Cabbage": { calories: 25, unit: "100g" },
    "Celery": { calories: 16, unit: "100g" },
    "Beetroot": { calories: 43, unit: "100g" },
    "Pumpkin": { calories: 26, unit: "100g" },
    "Okra (Lady Finger)": { calories: 33, unit: "100g" },
    "Bitter Gourd": { calories: 34, unit: "100g" },
    "Bottle Gourd": { calories: 14, unit: "100g" },

    // --- PULSES & LEGUMES (Cooked unless specified) ---
    "Chickpeas (Cooked)": { calories: 164, unit: "100g" },
    "Chickpeas (Raw)": { calories: 364, unit: "100g" },
    "Black Beans (Cooked)": { calories: 132, unit: "100g" },
    "Kidney Beans (Rajma, Cooked)": { calories: 127, unit: "100g" },
    "Lentils (Dal, Cooked)": { calories: 116, unit: "100g" },
    "Moong Dal (Cooked)": { calories: 105, unit: "100g" },
    "Toor Dal (Cooked)": { calories: 120, unit: "100g" },
    "Chana Masala": { calories: 165, unit: "100g" },
    "Dal Makhani": { calories: 280, unit: "100g" },
    "Dal Tadka": { calories: 130, unit: "100g" },
    "Hummus": { calories: 166, unit: "100g" },

    // --- FATS, NUTS & SEEDS ---
    "Almonds": { calories: 579, unit: "100g" },
    "Walnuts": { calories: 654, unit: "100g" },
    "Cashews": { calories: 553, unit: "100g" },
    "Peanuts": { calories: 567, unit: "100g" },
    "Pistachios": { calories: 562, unit: "100g" },
    "Chia Seeds": { calories: 486, unit: "100g" },
    "Flax Seeds": { calories: 534, unit: "100g" },
    "Pumpkin Seeds": { calories: 559, unit: "100g" },
    "Sunflower Seeds": { calories: 584, unit: "100g" },
    "Peanut Butter": { calories: 588, unit: "100g" },
    "Almond Butter": { calories: 614, unit: "100g" },
    "Olive Oil": { calories: 884, unit: "100ml" },
    "Coconut Oil": { calories: 890, unit: "100ml" },
    "Butter": { calories: 717, unit: "100g" },
    "Ghee": { calories: 900, unit: "100g" },
    "Mayonnaise": { calories: 680, unit: "100g" },
    "Cheese (Cheddar)": { calories: 402, unit: "100g" },
    "Cheese (Mozzarella)": { calories: 280, unit: "100g" },
    "Cream Cheese": { calories: 342, unit: "100g" },

    // --- SNACKS & FAST FOOD ---
    "Pizza (Cheese)": { calories: 266, unit: "100g" },
    "Pizza (Pepperoni)": { calories: 280, unit: "100g" },
    "Burger (Cheeseburger)": { calories: 300, unit: "100g" },
    "Burger (Chicken)": { calories: 270, unit: "100g" },
    "French Fries": { calories: 312, unit: "100g" },
    "Potato Chips": { calories: 536, unit: "100g" },
    "Popcorn (Buttered)": { calories: 500, unit: "100g" },
    "Chocolate (Milk)": { calories: 535, unit: "100g" },
    "Chocolate (Dark 70%)": { calories: 598, unit: "100g" },
    "Ice Cream (Vanilla)": { calories: 207, unit: "100g" },
    "Ice Cream (Chocolate)": { calories: 216, unit: "100g" },
    "Cookie (Choc Chip)": { calories: 480, unit: "100g" },
    "Cake (Chocolate)": { calories: 371, unit: "100g" },
    "Donut (Glazed)": { calories: 452, unit: "100g" },
    "Samosa": { calories: 262, unit: "1 unit" },
    "Pakora": { calories: 315, unit: "100g" },
    "Pani Puri": { calories: 36, unit: "1 unit" },
    "Gulab Jamun": { calories: 150, unit: "1 unit" },
    "Jalebi": { calories: 400, unit: "100g" },
    "Laddu": { calories: 250, unit: "1 unit" },

    // --- BEVERAGES ---
    "Milk (Whole)": { calories: 61, unit: "100ml" },
    "Milk (Semi-Skimmed)": { calories: 47, unit: "100ml" },
    "Milk (Skimmed)": { calories: 35, unit: "100ml" },
    "Almond Milk (Unsweetened)": { calories: 13, unit: "100ml" },
    "Soy Milk": { calories: 54, unit: "100ml" },
    "Oat Milk": { calories: 45, unit: "100ml" },
    "Coffee (Black)": { calories: 1, unit: "100ml" },
    "Coffee (Latte)": { calories: 55, unit: "100ml" },
    "Tea (Black)": { calories: 1, unit: "100ml" },
    "Tea (with Milk/Sugar)": { calories: 30, unit: "100ml" },
    "Orange Juice": { calories: 45, unit: "100ml" },
    "Apple Juice": { calories: 46, unit: "100ml" },
    "Cola": { calories: 42, unit: "100ml" },
    "Cola (Zero/Diet)": { calories: 0, unit: "100ml" },
    "Beer": { calories: 43, unit: "100ml" },
    "Wine (Red)": { calories: 85, unit: "100ml" },
    "Wine (White)": { calories: 82, unit: "100ml" },
    "Whiskey/Vodka/Gin": { calories: 231, unit: "100ml" },
    "Protein Shake (Whey+Water)": { calories: 120, unit: "1 serving" }
};

export const calculateCalories = (foodName, quantity, unit) => {
    if (!foodName) return 0;
    const normalizedInput = foodName.toLowerCase().trim();

    // 1. Try exact match
    let food = foodData[foodName];

    // 2. Try case-insensitive match
    if (!food) {
        const key = Object.keys(foodData).find(k => k.toLowerCase() === normalizedInput);
        if (key) food = foodData[key];
    }

    // 3. Try partial match (e.g. "chicken" -> "Chicken Breast") - prioritize exact starts
    if (!food) {
        const key = Object.keys(foodData).find(k => k.toLowerCase().startsWith(normalizedInput));
        if (key) food = foodData[key];
    }

    // 4. Try lenient partial match
    if (!food) {
        const key = Object.keys(foodData).find(k => k.toLowerCase().includes(normalizedInput));
        if (key) food = foodData[key];
    }

    if (!food) return 0;

    // Unit Conversion Logic
    // If food.unit is "100g" or "100ml" -> Base calculation / 100
    // If food.unit is "1 unit" -> Base calculation * quantity

    const isBase100 = food.unit.includes("100");

    if (isBase100) {
        // DB item is per 100g/ml
        if (unit.includes("100")) {
            // User selected 100g or 100ml base.
            // quantity here is presumably just a multiplier if they typed "200" into quantity box? 
            // WAIT: The UI sends the raw number "200". 
            // So if user types 200, they mean 200 units of the selected unit.
            // If selected unit is "100g", does that mean they selected "grams"?
            // The UI dropdown values are: "100g", "1 unit", "100ml".

            // Interpret UI "100g" as "Grams". So quantity 200 = 200g.
            // Formula: (Cal / 100) * quantity
            return Math.round((food.calories / 100) * quantity);
        } else {
            // User selected "1 unit". 
            // DB is 100g. We must estimate. Failsafe: 1 unit ~ 100g?
            return Math.round(food.calories * quantity);
        }
    } else {
        // DB item is per unit (e.g. 1 Banana)
        if (unit.includes("100")) {
            // User selected Grams for a Unit item.
            // Estimate 1 unit ~ 100g?
            // Formula: (Cal / 100) * quantity
            return Math.round((food.calories / 100) * quantity);
        } else {
            // User selected Unit for Unit item.
            // Formula: Cal * quantity
            return Math.round(food.calories * quantity);
        }
    }
    return 0;
};
